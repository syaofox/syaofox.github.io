---
layout: post
title: 导出本地 Docker 镜像并在另一台机器上导入
date: 2025-05-08 11:43:00 +0800
categories: [tips]
tags: [docker]
---



要导出本地 Docker 镜像并在另一台机器上导入，可以使用 `docker save` 和 `docker load` 命令。这是在不同 Docker 环境之间迁移镜像的标准方法，它会保留镜像的所有层和历史记录。

以下是详细的步骤：

**1. 在源机器上导出本地镜像**

首先，你需要确定要导出的镜像的名称和标签（TAG）。可以使用 `docker images` 命令查看本地镜像列表：

```bash
docker images
```

找到你要导出的镜像后，使用 `docker save` 命令将其保存为一个 `.tar` 文件。

```bash
docker save -o <导出文件名>.tar <镜像名称>:<标签>
```

* `<导出文件名>.tar>`：指定导出的文件名，通常以 `.tar` 结尾。
* `<镜像名称>:<标签>`：指定要导出的镜像的名称和标签。如果你想导出同一个镜像的所有标签，只需要提供镜像名称即可。

**示例：**

假设你要导出名为 `my-image`，标签为 `latest` 的镜像，并保存为 `my-image.tar`：

```bash
docker save -o my-image.tar my-image:latest
```

如果想导出 `my-image` 的所有标签：

```bash
docker save -o my-image_all_tags.tar my-image
```

**2. 将导出的 `.tar` 文件传输到目标机器**

将生成的 `.tar` 镜像文件通过网络（如 SCP、SFTP）或外部存储设备传输到目标机器。

**3. 在目标机器上导入镜像**

在目标机器上，使用 `docker load` 命令从 `.tar` 文件中导入镜像。

```bash
docker load -i <导入文件名>.tar
```

* `<导入文件名>.tar>`：指定要导入的 `.tar` 文件名。

**示例：**

假设你将 `my-image.tar` 文件传输到了目标机器，使用以下命令导入：

```bash
docker load -i my-image.tar
```

导入完成后，可以使用 `docker images` 命令验证镜像是否成功导入：

```bash
docker images
```

你应该能在列表里看到刚刚导入的镜像。

**总结：**

* 使用 `docker save` 导出镜像到 `.tar` 文件。
* 传输 `.tar` 文件到目标机器。
* 使用 `docker load` 导入镜像。

请注意，`docker export` 和 `docker import` 命令用于导出和导入容器的文件系统快照，这会丢失镜像的历史信息，并且不包含元数据，因此不适合用于迁移整个镜像。始终使用 `docker save` 和 `docker load` 来处理镜像的导入和导出。